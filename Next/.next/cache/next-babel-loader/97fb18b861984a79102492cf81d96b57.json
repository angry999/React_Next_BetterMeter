{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\WORK\\\\2020_11\\\\BetterMeter-Test-React-Next\\\\components\\\\Chart\\\\index.jsx\";\nimport { useRef } from 'react';\nimport { XAxis, YAxis, Tooltip, Line, LineChart, ResponsiveContainer } from 'recharts';\nimport { formatNumberShort, formatMinutes, formatNumber } from '../../utils/format';\nimport styles from './styles.module.scss';\nimport { CHART_UNIT } from '../../constants';\nimport useResponsive from '../../hooks/useResponsive';\nimport { Portal } from 'react-portal';\n\nconst Dot = props => {\n  const {\n    cx,\n    cy,\n    payload,\n    value,\n    chartRef,\n    fill,\n    formatValue\n  } = props;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n      r: \"5.5\",\n      stroke: \"white\",\n      strokeWidth: \"5\",\n      fill: fill,\n      className: \"recharts-dot recharts-line-dot\",\n      cx: cx,\n      cy: cy,\n      r: 10,\n      opacity: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Portal, {\n      node: chartRef.current,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.tooltip,\n        style: {\n          left: cx,\n          top: cy - 18\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tooltipLabel,\n          children: [payload.date, \"`20\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tooltipValue,\n          children: formatValue(value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tooltipArrow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nconst TooltipContent = () => /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 47,\n  columnNumber: 30\n}, this);\n\nconst UNIT_FORMATTER = {\n  [CHART_UNIT.NUMBER]: formatNumberShort,\n  [CHART_UNIT.TIME]: formatMinutes,\n  [CHART_UNIT.PERCENTAGE]: value => value + '%'\n};\nconst VALUE_FORMATTER = {\n  [CHART_UNIT.NUMBER]: formatNumber,\n  [CHART_UNIT.TIME]: formatMinutes,\n  [CHART_UNIT.PERCENTAGE]: value => value + '%'\n};\n\nconst Chart = ({\n  data,\n  color,\n  unit = CHART_UNIT.NUMBER\n}) => {\n  console.log(data);\n  const chartRef = useRef();\n  const {\n    isMobile\n  } = useResponsive();\n  const yAxisFormatter = UNIT_FORMATTER[unit];\n  const formatValue = VALUE_FORMATTER[unit];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.chart,\n    ref: chartRef,\n    children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      height: \"100%\",\n      width: \"100%\",\n      children: /*#__PURE__*/_jsxDEV(LineChart, {\n        data: data,\n        children: [/*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"date\",\n          type: \"category\",\n          domain: ['dataMin', 'dataMax'],\n          axisLine: false,\n          tickLine: false,\n          tickFormatter: value => value.toUpperCase(),\n          padding: {\n            left: 33,\n            right: 33\n          },\n          interval: \"preserveStart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), !isMobile && /*#__PURE__*/_jsxDEV(YAxis, {\n          dataKey: \"value\",\n          domain: ['dataMin', dataMax => dataMax * 1.1],\n          interval: 0,\n          axisLine: false,\n          tickLine: false,\n          scale: \"linear\",\n          orientation: \"right\",\n          tickFormatter: yAxisFormatter,\n          padding: {\n            bottom: 23,\n            top: 13\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          content: TooltipContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Line, {\n          dataKey: \"value\",\n          type: \"linear\",\n          stroke: color,\n          strokeWidth: 3,\n          dot: {\n            r: 0,\n            stroke: 0\n          },\n          activeDot: /*#__PURE__*/_jsxDEV(Dot, {\n            chartRef: chartRef,\n            fill: color,\n            formatValue: formatValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Chart;","map":{"version":3,"sources":["E:/WORK/2020_11/BetterMeter-Test-React-Next/components/Chart/index.jsx"],"names":["useRef","XAxis","YAxis","Tooltip","Line","LineChart","ResponsiveContainer","formatNumberShort","formatMinutes","formatNumber","styles","CHART_UNIT","useResponsive","Portal","Dot","props","cx","cy","payload","value","chartRef","fill","formatValue","current","tooltip","left","top","tooltipLabel","date","tooltipValue","tooltipArrow","TooltipContent","UNIT_FORMATTER","NUMBER","TIME","PERCENTAGE","VALUE_FORMATTER","Chart","data","color","unit","console","log","isMobile","yAxisFormatter","chart","toUpperCase","right","dataMax","bottom","r","stroke"],"mappings":"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","sourcesContent":["import { useRef } from 'react'\r\nimport {\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  Line,\r\n  LineChart,\r\n  ResponsiveContainer,\r\n} from 'recharts'\r\nimport {\r\n  formatNumberShort,\r\n  formatMinutes,\r\n  formatNumber,\r\n} from '../../utils/format'\r\nimport styles from './styles.module.scss'\r\nimport { CHART_UNIT } from '../../constants'\r\nimport useResponsive from '../../hooks/useResponsive'\r\nimport { Portal } from 'react-portal'\r\n\r\nconst Dot = (props) => {\r\n  const { cx, cy, payload, value, chartRef, fill, formatValue } = props\r\n  return (\r\n    <>\r\n      <circle\r\n        r=\"5.5\"\r\n        stroke=\"white\"\r\n        strokeWidth=\"5\"\r\n        fill={fill}\r\n        className=\"recharts-dot recharts-line-dot\"\r\n        cx={cx}\r\n        cy={cy}\r\n        r={10}\r\n        opacity={1}\r\n      />\r\n\r\n      <Portal node={chartRef.current}>\r\n        <div className={styles.tooltip} style={{ left: cx, top: cy - 18 }}>\r\n          <div className={styles.tooltipLabel}>{payload.date}`20</div>\r\n          <div className={styles.tooltipValue}>{formatValue(value)}</div>\r\n          <div className={styles.tooltipArrow} />\r\n        </div>\r\n      </Portal>\r\n    </>\r\n  )\r\n}\r\n\r\nconst TooltipContent = () => <div />\r\n\r\nconst UNIT_FORMATTER = {\r\n  [CHART_UNIT.NUMBER]: formatNumberShort,\r\n  [CHART_UNIT.TIME]: formatMinutes,\r\n  [CHART_UNIT.PERCENTAGE]: (value) => value + '%',\r\n}\r\n\r\nconst VALUE_FORMATTER = {\r\n  [CHART_UNIT.NUMBER]: formatNumber,\r\n  [CHART_UNIT.TIME]: formatMinutes,\r\n  [CHART_UNIT.PERCENTAGE]: (value) => value + '%',\r\n}\r\n\r\nconst Chart = ({ data, color, unit = CHART_UNIT.NUMBER }) => {\r\nconsole.log(data)\r\n  const chartRef = useRef()\r\n  const { isMobile } = useResponsive()\r\n  const yAxisFormatter = UNIT_FORMATTER[unit]\r\n  const formatValue = VALUE_FORMATTER[unit]\r\n\r\n  return (\r\n    <div className={styles.chart} ref={chartRef}>\r\n      <ResponsiveContainer height=\"100%\" width=\"100%\">\r\n        <LineChart data={data}>\r\n          <XAxis\r\n            dataKey=\"date\"\r\n            type=\"category\"\r\n            domain={['dataMin', 'dataMax']}\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tickFormatter={(value) => value.toUpperCase()}\r\n            padding={{ left: 33, right: 33 }}\r\n            interval=\"preserveStart\"\r\n          />\r\n          {!isMobile && (\r\n            <YAxis\r\n              dataKey=\"value\"\r\n              domain={['dataMin', (dataMax) => dataMax * 1.1]}\r\n              interval={0}\r\n              axisLine={false}\r\n              tickLine={false}\r\n              scale=\"linear\"\r\n              orientation=\"right\"\r\n              tickFormatter={yAxisFormatter}\r\n              padding={{ bottom: 23, top: 13 }}\r\n            />\r\n          )}\r\n          <Tooltip content={TooltipContent} />\r\n          <Line\r\n            dataKey=\"value\"\r\n            type=\"linear\"\r\n            stroke={color}\r\n            strokeWidth={3}\r\n            dot={{ r: 0, stroke: 0 }}\r\n            activeDot={\r\n              <Dot chartRef={chartRef} fill={color} formatValue={formatValue} />\r\n            }\r\n          />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chart\r\n"]},"metadata":{},"sourceType":"module"}